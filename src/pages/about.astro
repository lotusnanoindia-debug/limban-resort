---
import Layout from "../layouts/Layout.astro";
import { AstroSEO } from "astro-seo-plugin";
import GalleryGrid from "../components/GalleryGrid.astro";
import LoadMoreGallery from "../components/LoadMoreGallery.astro";
import GalleryModal from "../components/GalleryModal.astro";
import TestimonialsSection from "../components/TestimonialsSection.astro";
import AwardsSection from "../components/AwardsSection.astro";
import { fetchAboutData } from "../api.js";
import { getImage } from "astro:assets";

// Ultra-reliable API fetching with retry logic
async function fetchWithRetry(fetchFn, retries = 2) {
  for (let i = 0; i < retries; i++) {
    try {
      return await fetchFn();
    } catch (error) {
      if (i === retries - 1) throw error;
      await new Promise((resolve) => setTimeout(resolve, 1000));
    }
  }
}

// ðŸŽ¯ ONLY CHANGE: Removed 100ms delay between batches
async function processImagesInBatches(images, batchSize = 4) {
  const results = [];

  for (let i = 0; i < images.length; i += batchSize) {
    const batch = images.slice(i, i + batchSize);

    const batchResults = await Promise.all(
      batch.map((item, index) => processGalleryImage(item, i + index))
    );

    results.push(...batchResults);

    // ðŸŽ¯ REMOVED: This was causing slow builds
    // if (i + batchSize < images.length) {
    //   await new Promise((resolve) => setTimeout(resolve, 100));
    // }
  }

  return results;
}

// ðŸŽ¯ EXACT: Team image processor (unchanged)
async function processTeamImage(item, index = 0) {
  try {
    const sourceUrl = item.optimisedSquare || item.url;

    if (!sourceUrl) {
      throw new Error(`No URL found for team image ${index}`);
    }

    const [optimizedThumbnail, optimizedMedium, optimizedLarge, placeholder] =
      await Promise.all([
        getImage({
          src: sourceUrl,
          width: 96,
          height: 96,
          format: "avif",
          quality: 60,
          fit: "cover",
          inferSize: true,
        }),

        getImage({
          src: sourceUrl,
          width: 300,
          height: 300,
          format: "avif",
          quality: 50,
          fit: "cover",
          inferSize: true,
        }),

        getImage({
          src: sourceUrl,
          width: 800,
          height: 800,
          format: "avif",
          quality: 85,
          fit: "cover",
          inferSize: true,
        }),

        // Generate tiny LQIP
        getImage({
          src: sourceUrl,
          width: 20,
          height: 20,
          format: "avif",
          quality: 20,
          fit: "cover",
          inferSize: true,
        }),
      ]);

    // ðŸŽ¯ CRITICAL: Return EXACT structure GalleryGrid expects
    return {
      gallerythumbs: optimizedThumbnail.src, // Required by GalleryGrid
      medium: optimizedMedium.src, // Required by GalleryGrid
      src: optimizedLarge.src, // Required by GalleryGrid
      placeholder: placeholder.src, // Optional
      alt: `Limban Resort team member ${index + 1} - passionate hospitality professional dedicated to creating unforgettable safari experiences at Tadoba National Park Maharashtra`,
      width: optimizedLarge.width,
      height: optimizedLarge.height,
    };
  } catch (error) {
    console.error(`Failed to process team image ${index}:`, error);

    // ðŸŽ¯ CRITICAL: Fallback with exact structure
    return {
      gallerythumbs: item.optimisedSquare || item.url,
      medium: item.optimisedSquare || item.url,
      src: item.optimisedSquare || item.url,
      placeholder: item.optimisedSquare || item.url,
      alt: `Limban Resort team member ${index + 1} - passionate hospitality professional Tadoba National Park safari lodge`,
      width: 400,
      height: 400,
    };
  }
}

// ðŸŽ¯ EXACT: Single image optimizer (unchanged)
async function optimizeSingleImage(url, width, height, quality = 80) {
  if (!url) return null;
  try {
    const [optimized, placeholder] = await Promise.all([
      getImage({
        src: url,
        width: width,
        height: height,
        format: "avif",
        quality: quality,
        fit: "cover",
        inferSize: true,
      }),
      // Generate tiny LQIP
      getImage({
        src: url,
        width: Math.floor(width / 15), // 1/15th size for LQIP
        height: Math.floor(height / 15),
        format: "avif",
        quality: 20,
        fit: "cover",
        inferSize: true,
      }),
    ]);

    return {
      ...optimized,
      placeholder: placeholder.src,
    };
  } catch (error) {
    console.error("Failed to optimize single image:", error);
    return { src: url, placeholder: url };
  }
}

// ðŸŽ¯ EXACT: Gallery image processor (unchanged)
async function processGalleryImage(item, index = 0) {
  try {
    const imageObj = item.image || item;
    const sourceUrl = imageObj.large || imageObj.grid || imageObj.url;

    if (!sourceUrl) {
      throw new Error(`No URL found for image ${index}`);
    }

    const [optimizedThumbnail, optimizedMedium, optimizedLarge] =
      await Promise.all([
        getImage({
          src: sourceUrl,
          width: 96,
          height: 96,
          format: "avif",
          quality: 60,
          fit: "cover",
          inferSize: true,
        }),

        getImage({
          src: sourceUrl,
          width: 300,
          height: 300,
          format: "avif",
          quality: 60,
          fit: "cover",
          inferSize: true,
        }),

        getImage({
          src: sourceUrl,
          width: 1600,
          format: "avif",
          quality: 80,
          fit: "inside",
          inferSize: true,
        }),
      ]);

    return {
      src: optimizedLarge.src,
      gallerythumbs: optimizedThumbnail.src,
      medium: optimizedMedium.src,
      placeholder: imageObj.placeholder || sourceUrl,
      alt: `${item.caption || item.altText || "Limban Resort experience"} - Luxury safari lodge Tadoba National Park Maharashtra architectural design sustainable tourism`,
      width: optimizedLarge.width,
      height: optimizedLarge.height,
    };
  } catch (error) {
    console.error(`Failed to process gallery image ${index}:`, error);

    const imageObj = item.image || item;
    return {
      src: imageObj.large || imageObj.grid || imageObj.url,
      gallerythumbs: imageObj.gallerythumbs || imageObj.grid || imageObj.url,
      medium: imageObj.thumb400 || imageObj.grid || imageObj.url,
      placeholder: imageObj.placeholder || imageObj.url,
      alt: `${item.caption || item.altText || "Limban Resort experience"} - Luxury safari lodge Tadoba National Park Maharashtra ${index + 1}`,
      width: imageObj.width || 300,
      height: imageObj.height || 300,
    };
  }
}

// Fetch data with retry protection
let aboutData = null;
try {
  aboutData = await fetchWithRetry(() => fetchAboutData());
} catch (err) {
  console.error("Failed to load about data:", err);
  aboutData = {
    aboutPage: {},
    vibeGallery: { images: [] },
    guestGallery: { images: [] },
  };
}

const aboutPage = aboutData?.aboutPage || {};
const vibeGallery = aboutData?.vibeGallery || { images: [] };
const guestGallery = aboutData?.guestGallery || { images: [] };

// ðŸŽ¯ EXACT: Process hero images (unchanged)
const [heroImage, philosophyImage, foundersImage] = await Promise.all([
  optimizeSingleImage(
    aboutPage?.heroImage?.optimisedCard || aboutPage?.heroImage?.url,
    1920,
    1080,
    85
  ),
  optimizeSingleImage(
    aboutPage?.philosophyImage?.optimisedWide ||
      aboutPage?.philosophyImage?.url,
    1200,
    686,
    60
  ),
  optimizeSingleImage(
    aboutPage?.foundersImage?.optimisedPortrait ||
      aboutPage?.foundersImage?.url,
    600,
    1000,
    60
  ),
]);

// ðŸŽ¯ EXACT: Process team images (unchanged)
const teamImages = aboutPage?.teamImages || [];
const [initialTeamOptimized] = await Promise.all([
  // Process first 12 team images for initial display
  teamImages.slice(0, 12).length > 0
    ? Promise.all(
        teamImages
          .slice(0, 12)
          .map((item, index) => processTeamImage(item, index))
      )
    : [],
]);

// Process remaining team images (unoptimized for performance)
const remainingTeamImages = (teamImages || []).slice(12).map((item, index) => ({
  gallerythumbs: item.optimisedSquare || item.url,
  medium: item.optimisedSquare || item.url,
  src: item.optimisedSquare || item.url,
  placeholder: item.optimisedSquare || item.url,
  alt: `Limban Resort team member ${index + 13} - passionate hospitality professional Tadoba National Park safari lodge Maharashtra`,
  width: 400,
  height: 400,
}));

// ðŸŽ¯ EXACT: Process gallery images in batches (unchanged)
const [initialVibeOptimized, initialGuestOptimized] = await Promise.all([
  processImagesInBatches(vibeGallery?.images?.slice(0, 12) || []),
  processImagesInBatches(guestGallery?.images?.slice(0, 12) || []),
]);

// Process remaining images (unoptimized for performance)
const remainingVibeImages = (vibeGallery?.images || [])
  .slice(12)
  .map((item, index) => ({
    src: item?.image?.large || item?.image?.grid || item?.image?.url || "",
    gallerythumbs: item?.image?.gallerythumbs || item?.image?.grid || "",
    medium: item?.image?.thumb400 || item?.image?.url || "",
    placeholder: item?.image?.placeholder || item?.image?.url || "",
    alt: `${item?.altText || "Limban Resort vibe"} - Luxury safari experience Tadoba National Park Maharashtra architecture sustainable design ${index + 13}`,
    width: parseInt(item?.image?.width) || 300,
    height: parseInt(item?.image?.height) || 300,
  }));

const remainingGuestImages = (guestGallery?.images || [])
  .slice(12)
  .map((item, index) => ({
    src: item?.large || item?.grid || item?.url || "",
    gallerythumbs: item?.gallerythumbs || item?.grid || "",
    medium: item?.thumb400 || item?.url || "",
    placeholder: item?.placeholder || item?.url || "",
    alt: `Guests enjoying luxury safari experience at Limban Resort Tadoba National Park Maharashtra wildlife photography ${index + 13}`,
    width: parseInt(item?.width) || 300,
    height: parseInt(item?.height) || 300,
  }));

// Split for display
const initialVibeImages = initialVibeOptimized;
const initialGuestImages = initialGuestOptimized;
const initialTeamImages = initialTeamOptimized;

// Extract optimized URLs for meta tags
const heroImageSrc = heroImage?.src || "/limban-about-hero.avif";
const philosophyImageSrc = philosophyImage?.src || "";
const foundersImageSrc = foundersImage?.src || "";
---

<Layout>
  <AstroSEO
    slot="head"
    title="About Limban Resort | Where the Wild Meets the Soul - Tadoba Safari Lodge"
    description="Discover the philosophy behind Limban Resort - a luxury safari sanctuary crafted by visionary architects in the heart of Tadoba National Park. Experience where wilderness meets luxury."
    canonical="https://limban.com/about"
    openGraph={{
      title: "About Limban Resort - Where the Wild Meets the Soul",
      description:
        "A luxury safari sanctuary where architecture, wilderness, and soul converge in Tadoba National Park.",
      image: heroImageSrc,
      type: "website",
      url: "https://limban.com/about",
    }}
    jsonLd={{
      "@context": "https://schema.org",
      "@type": "AboutPage",
      name: "About Limban Resort - Where the Wild Meets the Soul",
      description:
        "Discover the philosophy behind Limban Resort - a luxury safari sanctuary crafted by visionary architects in the heart of Tadoba National Park.",
      url: "https://limban.com/about",
      image: [
        heroImageSrc,
        philosophyImageSrc,
        foundersImageSrc,
        ...initialVibeImages.slice(0, 3).map((img) => img.src),
        ...initialGuestImages.slice(0, 2).map((img) => img.src),
        ...initialTeamImages.slice(0, 2).map((img) => img.src),
      ].filter(Boolean),
      mainEntity: {
        "@type": "LodgingBusiness",
        "@id": "https://limban.com/#organization",
        name: "Limban Resort",
        alternateName: "Limban Safari Lodge",
        description:
          "A luxury safari sanctuary where architecture, wilderness, and soul converge. Crafted for those who seek meaning in nature, connection in simplicity, and magic in the moment.",
        url: "https://limban.com",
        logo: "https://limban.com/limban-resort-tadoba-logo.png",
        slogan: "Where the Wild Meets the Soul",
        foundingDate: "2020",
        address: {
          "@type": "PostalAddress",
          streetAddress: "Survey No. 306, Village Mudholi, Taluka Bhadravati",
          addressLocality: "Chandrapur",
          addressRegion: "Maharashtra",
          postalCode: "442906",
          addressCountry: "IN",
        },
        geo: {
          "@type": "GeoCoordinates",
          latitude: 20.25602486093492,
          longitude: 79.2847888101826,
        },
        founder: [
          {
            "@type": "Person",
            name: "Amala Sheth",
            jobTitle: "Founder & Principal Architect",
            description:
              "Visionary architect whose revolutionary approach to sustainable luxury earned international recognition and redefined safari lodge design.",
            worksFor: {
              "@type": "Organization",
              name: "Metaphors Design",
              url: "http://www.metaphors-design.com/",
            },
            knowsAbout: [
              "Sustainable Architecture",
              "Luxury Resort Design",
              "Eco-Tourism",
            ],
            award: "International recognition for sustainable luxury design",
          },
          {
            "@type": "Person",
            name: "Anand Bhagat",
            jobTitle: "Founder & Principal Architect",
            description:
              "Architectural visionary dedicated to creating spaces that connect people with nature and conserve the wild.",
            worksFor: {
              "@type": "Organization",
              name: "Metaphors Design",
              url: "http://www.metaphors-design.com/",
            },
            knowsAbout: [
              "Sustainable Architecture",
              "Wildlife Conservation",
              "Eco-Tourism Design",
            ],
          },
        ],
      },
    }}
  />

  <!-- Critical resource hints for LCP optimization -->
  {
    heroImage && (
      <link
        rel="preload"
        as="image"
        href={heroImage.src}
        fetchpriority="high"
      />
    )
  }
  {
    philosophyImage && (
      <link rel="preload" as="image" href={philosophyImage.src} />
    )
  }

  <div class="bg-gray-950 text-gray-100 selection:bg-gray-700">
    <!-- Hero Section with LQIP background -->
    <section
      class="relative min-h-screen flex items-center justify-center overflow-hidden"
    >
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-black/60 z-10"></div>
        <img
          src={heroImage?.src || heroImageSrc}
          alt="Limban Resort - Where wilderness meets luxury in Tadoba National Park - sustainable architecture award-winning design"
          class="w-full h-full object-cover scale-105"
          fetchpriority="high"
          style={heroImage?.placeholder
            ? `background-image: url(${heroImage.placeholder}); background-size: cover; background-position: center;`
            : ""}
        />
      </div>

      <div class="relative z-20 text-center max-w-5xl mx-auto px-6">
        <div class="space-y-8">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Since 2017</span
            >
          </div>
          <h1
            class="font-serif text-5xl md:text-7xl lg:text-8xl text-white mb-6 leading-none italic"
          >
            Where the Wild<br />
            <span class="text-amber-400">Meets the Soul</span>
          </h1>
          <p
            class="text-xl md:text-2xl text-gray-200 font-light leading-relaxed max-w-3xl mx-auto"
          >
            More than a destination - an awakening. A carefully crafted
            sanctuary where luxury, wilderness, and heritage converge in perfect
            harmony.
          </p>
          <div class="pt-8">
            <p class="text-2xl font-serif italic text-amber-400">
              Wildly Yours.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Breadcrumb Navigation -->
    <nav class="py-6 border-b border-gray-800/50">
      <div class="max-w-7xl mx-auto px-6">
        <div
          class="flex items-center justify-center space-x-2 text-sm text-gray-400"
        >
          <a
            href="/"
            class="hover:text-amber-400 transition-colors duration-300">Home</a
          >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span class="text-amber-400 font-medium">About</span>
        </div>
      </div>
    </nav>

    <!-- Philosophy Section with optimized image -->
    <section class="py-32 bg-gray-900">
      <div class="max-w-6xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Our Philosophy</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            A Sanctuary for the Soul
          </h2>
          <p
            class="text-xl text-gray-300 font-light leading-relaxed max-w-4xl mx-auto"
          >
            Tucked within the lush, untamed landscapes of Tadoba, Limban is more
            than a destinationâ€”it's an experience, a retreat, and a deep exhale.
            Crafted for those who seek meaning in nature, connection in
            simplicity, and magic in the moment.
          </p>
        </div>

        {
          philosophyImage?.src && (
            <div class="mb-20">
              <div class="relative aspect-[21/9] bg-gray-800 rounded-2xl overflow-hidden">
                <img
                  src={philosophyImage.src}
                  alt="Limban Resort philosophy - award-winning sustainable luxury safari lodge architecture surrounded by Tadoba wilderness Maharashtra"
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"
                  loading="lazy"
                  style={
                    philosophyImage.placeholder
                      ? `background-image: url(${philosophyImage.placeholder}); background-size: cover; background-position: center;`
                      : ""
                  }
                />
              </div>
            </div>
          )
        }

        <div class="text-center">
          <p
            class="text-2xl md:text-xl text-white font-light leading-relaxed max-w-5xl mx-auto"
          >
            From ethical safaris that trace the paths of tigers to intimate
            celebrations beneath ancient trees, Limban is a call back to what's
            real. We celebrate life's raw beauty, honour the wild with grace,
            and open our arms to those who want to experience something deeper,
            something unforgettable.
          </p>
        </div>
      </div>
    </section>

    <!-- Visionaries Section with optimized founders image -->
    <section class="py-32 bg-gray-950">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >The Visionaries</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Architects of Dreams
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Meet Amala Sheth and Anand Bhagat - the architectural duo whose
            revolutionary approach to sustainable luxury earned international
            recognition and redefined safari lodge design.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
          <div class="space-y-12">
            <!-- Amala Sheth -->
            <div class="group">
              <div
                class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 transition-all duration-500"
              >
                <blockquote class="space-y-6">
                  <p
                    class="text-lg md:text-xl text-gray-200 font-light leading-relaxed italic"
                  >
                    "In life's myriad journey, the fulfilment of all the senses
                    is the true culmination of one's ultimate experience. And
                    this knowledge is the seed that grows... bearing so many
                    questions about our mindlessness & ignorance, as we defy
                    every Law of Nature and every Truth of Existence."
                  </p>
                  <footer class="flex items-center space-x-4">
                    <div
                      class="w-12 h-12 bg-amber-400/20 rounded-full flex items-center justify-center"
                    >
                      <span class="text-amber-400 font-serif text-xl">A</span>
                    </div>
                    <div>
                      <cite
                        class="text-amber-400 font-medium text-lg not-italic"
                        >Amala Sheth</cite
                      >
                      <p class="text-gray-400 text-sm">
                        Founder & Principal Architect<br />Partner, <a
                          href="http://www.metaphors-design.com/"
                          target="_blank"
                          class="text-blue-400 hover:text-blue-300 transition-colors duration-300"
                          >Metaphors Design</a
                        >, Pune
                      </p>
                    </div>
                  </footer>
                </blockquote>
              </div>
            </div>

            <!-- Anand Bhagat -->
            <div class="group">
              <div
                class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 transition-all duration-500"
              >
                <blockquote class="space-y-6">
                  <p
                    class="text-lg md:text-xl text-gray-200 font-light leading-relaxed italic"
                  >
                    "There are but a few who are blessed with this realisation.
                    And it is this realisation which gives birth to a new
                    passion... to look, explore, connect and conserve."
                  </p>
                  <footer class="flex items-center space-x-4">
                    <div
                      class="w-12 h-12 bg-amber-400/20 rounded-full flex items-center justify-center"
                    >
                      <span class="text-amber-400 font-serif text-xl">A</span>
                    </div>
                    <div>
                      <cite
                        class="text-amber-400 font-medium text-lg not-italic"
                        >Anand Bhagat</cite
                      >
                      <p class="text-gray-400 text-sm">
                        Founder & Principal Architect<br />Partner, <a
                          href="http://www.metaphors-design.com/"
                          class="text-blue-400 hover:text-blue-300 transition-colors duration-300"
                          target="_blank">Metaphors Design</a
                        >, Pune
                      </p>
                    </div>
                  </footer>
                </blockquote>
              </div>
            </div>
          </div>

          {
            foundersImage?.src && (
              <div class="relative">
                <div class="aspect-[4/5] bg-gray-800 rounded-3xl overflow-hidden">
                  <img
                    src={foundersImage.src}
                    alt="Amala Sheth and Anand Bhagat - Visionary architects founders of Limban Resort award-winning sustainable luxury safari lodge design Tadoba Maharashtra"
                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"
                    loading="lazy"
                    style={
                      foundersImage.placeholder
                        ? `background-image: url(${foundersImage.placeholder}); background-size: cover; background-position: center;`
                        : ""
                    }
                  />
                </div>
              </div>
            )
          }
        </div>
      </div>
    </section>

    <!-- Our Ethos -->
    <section class="py-32 bg-gradient-to-b from-gray-900 to-green-950/30">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <div
          class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
        >
          <span
            class="text-amber-400 text-sm font-medium tracking-widest uppercase"
            >Our Promise</span
          >
        </div>
        <h2 class="font-serif italic text-4xl md:text-5xl text-white mb-8">
          People. Planet. Purpose.
        </h2>
        <p class="text-xl text-gray-300 font-light leading-relaxed mb-8">
          Every choice at Limban serves a deeper purpose. We've created a
          sanctuary where luxury means leaving the wild untouched, where comfort
          comes from connection, not consumption. Our commitment flows naturally
          - to the forest that shelters us, the community that sustains us, and
          the guests who trust us with their most meaningful journeys.
        </p>
      </div>
    </section>

    <!-- Feel the Vibe Gallery with batched processing -->
    <section class="py-32 bg-gray-900">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >The Limban Experience</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Feel the Vibe of the Wild
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-4xl mx-auto">
            From dawn to dusk, each corner of Limban offers its own unique
            chapter in your safari story, designed to awaken your senses and
            connect you deeper with the wild.
          </p>
        </div>

        <GalleryGrid
          images={initialVibeImages}
          galleryType="vibe"
          gridId="vibe-gallery-grid"
        />

        <LoadMoreGallery
          buttonId="load-more-vibe"
          remainingImages={remainingVibeImages}
          initialImages={initialVibeImages}
          galleryType="vibe"
          galleryGridId="vibe-gallery-grid"
        />

        <div class="text-center mt-8">
          <p class="text-lg text-gray-300 font-light italic">
            Click any image to explore our signature spaces in detail
          </p>
        </div>
      </div>
    </section>

    <!-- Guest Gallery with batched processing -->
    <section class="py-32 bg-gray-800">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Our Guests</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-5xl text-white mb-6">
            Moments Made at Limban
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Every smile tells a story, every moment captures the magic of
            connecting with the wild
          </p>
        </div>

        <GalleryGrid
          images={initialGuestImages}
          galleryType="guest"
          gridId="guest-gallery-grid"
        />

        <LoadMoreGallery
          buttonId="load-more-guests"
          remainingImages={remainingGuestImages}
          initialImages={initialGuestImages}
          galleryType="guest"
          galleryGridId="guest-gallery-grid"
        />

        <div class="text-center mt-6">
          <p class="text-gray-400 font-light italic">
            Click any photo to explore our guest moments in detail
          </p>
        </div>
      </div>
    </section>

    <!-- Team Gallery Section -->
    {
      initialTeamImages && initialTeamImages.length > 0 && (
        <section class="py-32 bg-gray-950">
          <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
              <div class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8">
                <span class="text-amber-400 text-sm font-medium tracking-widest uppercase">
                  Our People
                </span>
              </div>
              <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
                The Heart of Limban
              </h2>
              <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
                Meet our passionate team which brings Limban to life, each
                dedicated to creating unforgettable experiences that connect you
                with the wild.
              </p>
            </div>

            <GalleryGrid
              images={initialTeamImages}
              galleryType="team"
              gridId="team-gallery-grid"
            />

            {remainingTeamImages && remainingTeamImages.length > 0 && (
              <LoadMoreGallery
                buttonId="load-more-team"
                remainingImages={remainingTeamImages}
                initialImages={initialTeamImages}
                galleryType="team"
                galleryGridId="team-gallery-grid"
              />
            )}

            {(!remainingTeamImages || remainingTeamImages.length === 0) && (
              <script define:vars={{ initialTeamImages }}>
                window.addEventListener('load', () => {
                  // Set up team gallery for modal (since LoadMoreGallery won't run)
                  window.galleryImages = window.galleryImages || {};
                  window.galleryImages.team = initialTeamImages;
                  console.log('Team gallery manually set up with', initialTeamImages.length, 'images');
                });
              </script>
            )}
            <div class="text-center mt-6">
              <p class="text-gray-400 font-light italic">
                Click any photo to meet our team members
              </p>
            </div>
          </div>
        </section>
      )
    }

    <!-- Location Section -->
    <section class="py-32 bg-gray-900">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Find Your Way</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Journey to the Wild
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Nestled in the heart of Tadoba National Park, your journey to Limban
            is part of the experience itself.
          </p>
        </div>

        <!-- Travel Options -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Air</h3>
              <p class="text-gray-300 leading-relaxed">
                Dr. Babasaheb Ambedkar International Airport, Nagpur (125 km).
                Well-connected with direct flights from Mumbai, Delhi,
                Bengaluru, and Hyderabad.
              </p>
            </div>
          </div>

          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Road</h3>
              <p class="text-gray-300 leading-relaxed">
                A delightful drive through picturesque landscapes and rural
                Maharashtra, making the journey as memorable as the destination
                itself.
              </p>
            </div>
          </div>

          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Train</h3>
              <p class="text-gray-300 leading-relaxed">
                Chandrapur Railway Station (41 km) with connections to major
                cities. Comfortable transfers arranged by our team for seamless
                arrival.
              </p>
            </div>
          </div>
        </div>

        <!-- Address & Map -->
        <div
          class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl overflow-hidden"
        >
          <div class="p-8 text-center">
            <h3 class="font-serif italic text-4xl text-white mb-4">
              Our Address
            </h3>
            <div class="space-y-2 text-gray-300">
              <p class="text-lg">
                Survey No. 306, Village Mudholi, Taluka Bhadravati
              </p>
              <p>Chandrapur, Maharashtra 442906</p>
              <p class="text-amber-400 font-mono text-sm">
                20.25602486093492, 79.2847888101826
              </p>
            </div>
          </div>

          <div class="relative h-96 bg-gray-800">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3065.6143576966315!2d79.28224607418248!3d20.255878913877122!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bd331638d23f16f%3A0xd1c44c43e72c13f7!2sLimban%20Resort!5e1!3m2!1sen!2sin!4v1746016058517!5m2!1sen!2sin"
              width="100%"
              height="100%"
              style="border:0; filter: grayscale(20%) sepia(10%) hue-rotate(200deg) saturate(0.8);"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              class="w-full h-full"></iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- Guest Testimonials -->
    <TestimonialsSection />

    <!-- Awards & Recognition -->
    <AwardsSection />

    <!-- Call to Action -->
    <section class="py-32 bg-gray-950">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
          Ready for Your Wild Awakening?
        </h2>
        <p
          class="text-xl text-gray-300 font-light leading-relaxed mb-12 max-w-3xl mx-auto"
        >
          Your journey into the heart of Tadoba awaits. Experience luxury that
          respects the wild, hospitality that touches the soul, and moments that
          become memories forever.
        </p>
        <div class="flex flex-col sm:flex-row gap-6 justify-center">
          <a href="/rooms" class="cta-filled">
            Explore Our Rooms
            <svg
              class="w-5 h-5 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
          <a href="/vibe" class="cta-outlined">
            The Limban Vibe
            <svg
              class="w-5 h-5 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
      </div>
    </section>
  </div>

  <GalleryModal />
</Layout>

<style>
  .optimised-image {
    transition:
      filter 0.5s ease,
      opacity 0.5s ease;
    will-change: filter, opacity;
  }

  .optimised-image.opacity-100 {
    opacity: 1 !important;
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #1f2937;
  }

  ::-webkit-scrollbar-thumb {
    background: #f59e0b;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #d97706;
  }

  @media (prefers-reduced-motion: reduce) {
    .transition-transform,
    .transition-all,
    .hover\:scale-105,
    .optimised-image {
      transition: none !important;
      transform: none !important;
    }
  }
</style>
