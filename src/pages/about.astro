---
import Layout from "../layouts/Layout.astro";
import { AstroSEO } from "astro-seo-plugin";
import GalleryGrid from "../components/GalleryGrid.astro";
import LoadMoreGallery from "../components/LoadMoreGallery.astro";
import { fetchAboutData } from "../api.js";

// Fetch data - now gets everything in one call
const aboutData = await fetchAboutData();

// Safe data extraction - both galleries now come from aboutData
const aboutPage = aboutData?.aboutPage || {};
const vibeGallery = aboutData?.vibeGallery || { images: [] };
const guestGallery = aboutData?.guestGallery || { images: [] };

// Extract page images
const heroImageSrc =
  aboutPage?.heroImage?.optimisedCard || aboutPage?.heroImage?.url || "";
const philosophyImageSrc =
  aboutPage?.philosophyImage?.optimisedWide ||
  aboutPage?.philosophyImage?.url ||
  "";
const foundersImageSrc =
  aboutPage?.foundersImage?.optimisedPortrait ||
  aboutPage?.foundersImage?.url ||
  "";
const teamImages = aboutPage?.teamImages || [];

// Process gallery images - simplified and consistent
function processGalleryImages(galleryData, altPrefix) {
  if (!galleryData?.images?.length) return [];

  return galleryData.images.map((item, idx) => ({
    src: item.image?.grid || item.image?.url || "",
    srcset: `${item.image?.grid || ""} 300w, ${item.image?.thumb400 || ""} 400w`,
    placeholder: item.image?.placeholder || item.image?.url || "",
    large: item.image?.large || item.image?.url || "",
    alt: item.altText || `${altPrefix} ${idx + 1}`,
    width: item.image?.width || 300,
    height: item.image?.height || 300,
  }));
}

// Process guest gallery differently (direct structure)
function processGuestImages(galleryData) {
  if (!galleryData?.images?.length) return [];

  return galleryData.images.map((item, idx) => ({
    src: item?.grid || item?.url || "",
    srcset: `${item?.grid || ""} 300w, ${item?.thumb400 || ""} 400w`,
    placeholder: item?.placeholder || item?.url || "",
    large: item?.large || item?.url || "",
    alt: `Guests enjoying their stay at Limban Resort (${idx + 1})`,
    width: item?.width || 300,
    height: item?.height || 300,
  }));
}

// Process both galleries
const allVibeImages = processGalleryImages(vibeGallery, "Limban vibe");
const allGuestImages = processGuestImages(guestGallery);

// Split into initial and remaining for load more functionality
const initialVibeImages = allVibeImages.slice(0, 12);
const remainingVibeImages = allVibeImages.slice(12);
const initialGuestImages = allGuestImages.slice(0, 12);
const remainingGuestImages = allGuestImages.slice(12);
---

<Layout title="About Limban Resort - Where the Wild Meets the Soul">
  <AstroSEO
    title="About Limban Resort | Where the Wild Meets the Soul - Tadoba Safari Lodge"
    description="Discover the philosophy behind Limban Resort - a luxury safari sanctuary crafted by visionary architects in the heart of Tadoba National Park. Experience where wilderness meets luxury."
    canonical="https://limban.com/about"
    openGraph={{
      title: "About Limban Resort - Where the Wild Meets the Soul",
      description:
        "A luxury safari sanctuary where architecture, wilderness, and soul converge in Tadoba National Park.",
      image: heroImageSrc,
      type: "website",
      url: "https://limban.com/about",
    }}
    additionalLinkTags={[{ rel: "preload", as: "image", href: heroImageSrc }]}
    additionalMetaTags={[
      { name: "robots", content: "index, follow" },
      { name: "theme-color", content: "#1f2937" },
    ]}
  />

  <div class="bg-gray-950 text-gray-100 selection:bg-gray-700">
    <!-- Hero Section -->
    <section
      class="relative min-h-screen flex items-center justify-center overflow-hidden"
    >
      <div class="absolute inset-0">
        <div class="absolute inset-0 bg-black/60 z-10"></div>
        <img
          src={heroImageSrc}
          alt="Limban Resort - Where wilderness meets luxury in Tadoba National Park"
          class="w-full h-full object-cover scale-105"
          fetchpriority="high"
        />
      </div>

      <div class="relative z-20 text-center max-w-5xl mx-auto px-6">
        <div class="space-y-8">
          <h1
            class="font-serif text-5xl md:text-7xl lg:text-8xl text-white mb-6 leading-none italic"
          >
            Where the Wild<br />
            <span class="text-amber-400">Meets the Soul</span>
          </h1>
          <p
            class="text-xl md:text-2xl text-gray-200 font-light leading-relaxed max-w-3xl mx-auto"
          >
            More than a destination - an awakening. A carefully crafted
            sanctuary where luxury, wilderness, and heritage converge in perfect
            harmony.
          </p>
          <div class="pt-8">
            <p class="text-2xl font-serif italic text-amber-400">
              Wildly Yours.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Breadcrumb Navigation -->
    <nav class="py-6 border-b border-gray-800/50">
      <div class="max-w-7xl mx-auto px-6">
        <div
          class="flex items-center justify-center space-x-2 text-sm text-gray-400"
        >
          <a
            href="/"
            class="hover:text-amber-400 transition-colors duration-300">Home</a
          >
          <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span class="text-amber-400 font-medium">About</span>
        </div>
      </div>
    </nav>

    <!-- Philosophy Section -->
    <section class="py-32 bg-gray-900">
      <div class="max-w-6xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Our Philosophy</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            A Sanctuary for the Soul
          </h2>
          <p
            class="text-xl text-gray-300 font-light leading-relaxed max-w-4xl mx-auto"
          >
            Tucked within the lush, untamed landscapes of Tadoba, Limban is more
            than a destinationâ€”it's an experience, a retreat, and a deep exhale.
            Crafted for those who seek meaning in nature, connection in
            simplicity, and magic in the moment.
          </p>
        </div>

        {
          philosophyImageSrc && (
            <div class="mb-20">
              <div class="relative aspect-[21/9] bg-gray-800 rounded-2xl overflow-hidden">
                <img
                  src={philosophyImageSrc}
                  alt="Limban Resort philosophy - luxury safari lodge surrounded by Tadoba wilderness"
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"
                  loading="lazy"
                />
              </div>
            </div>
          )
        }

        <div class="text-center">
          <p
            class="text-2xl md:text-xl text-white font-light leading-relaxed max-w-5xl mx-auto"
          >
            From ethical safaris that trace the paths of tigers to intimate
            celebrations beneath ancient trees, Limban is a call back to what's
            real. We celebrate life's raw beauty, honour the wild with grace,
            and open our arms to those who want to experience something deeper,
            something unforgettable.
          </p>
        </div>
      </div>
    </section>

    <!-- Visionaries Section -->
    <section class="py-32 bg-gray-950">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >The Visionaries</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Architects of Dreams
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Meet Amala Sheth and Anand Bhagat - the architectural duo whose
            revolutionary approach to sustainable luxury earned international
            recognition and redefined safari lodge design.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
          <div class="space-y-12">
            <!-- Amala Sheth -->
            <div class="group">
              <div
                class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 transition-all duration-500"
              >
                <blockquote class="space-y-6">
                  <p
                    class="text-lg md:text-xl text-gray-200 font-light leading-relaxed italic"
                  >
                    "In life's myriad journey, the fulfilment of all the senses
                    is the true culmination of one's ultimate experience. And
                    this knowledge is the seed that grows... bearing so many
                    questions about our mindlessness & ignorance, as we defy
                    every Law of Nature and every Truth of Existence."
                  </p>
                  <footer class="flex items-center space-x-4">
                    <div
                      class="w-12 h-12 bg-amber-400/20 rounded-full flex items-center justify-center"
                    >
                      <span class="text-amber-400 font-serif text-xl">A</span>
                    </div>
                    <div>
                      <cite
                        class="text-amber-400 font-medium text-lg not-italic"
                        >Amala Sheth</cite
                      >
                      <p class="text-gray-400 text-sm">
                        Founder & Principal Architect<br />Partner, <a
                          href="http://www.metaphors-design.com/"
                          target="_blank"
                          class="text-blue-400 hover:text-blue-300 transition-colors duration-300"
                          >Metaphors Design</a
                        >, Pune
                      </p>
                    </div>
                  </footer>
                </blockquote>
              </div>
            </div>

            <!-- Anand Bhagat -->
            <div class="group">
              <div
                class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 transition-all duration-500"
              >
                <blockquote class="space-y-6">
                  <p
                    class="text-lg md:text-xl text-gray-200 font-light leading-relaxed italic"
                  >
                    "There are but a few who are blessed with this realisation.
                    And it is this realisation which gives birth to a new
                    passion... to look, explore, connect and conserve."
                  </p>
                  <footer class="flex items-center space-x-4">
                    <div
                      class="w-12 h-12 bg-amber-400/20 rounded-full flex items-center justify-center"
                    >
                      <span class="text-amber-400 font-serif text-xl">A</span>
                    </div>
                    <div>
                      <cite
                        class="text-amber-400 font-medium text-lg not-italic"
                        >Anand Bhagat</cite
                      >
                      <p class="text-gray-400 text-sm">
                        Founder & Principal Architect<br />Partner, <a
                          href="http://www.metaphors-design.com/"
                          class="text-blue-400 hover:text-blue-300 transition-colors duration-300"
                          target="_blank">Metaphors Design</a
                        >, Pune
                      </p>
                    </div>
                  </footer>
                </blockquote>
              </div>
            </div>
          </div>

          {
            foundersImageSrc && (
              <div class="relative">
                <div class="aspect-[4/5] bg-gray-800 rounded-3xl overflow-hidden">
                  <img
                    src={foundersImageSrc}
                    alt="Amala Sheth and Anand Bhagat - Visionary architects and founders of Limban Resort"
                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"
                    loading="lazy"
                  />
                </div>
              </div>
            )
          }
        </div>
      </div>
    </section>

    <!-- Our Ethos -->
    <section class="py-32 bg-gradient-to-b from-gray-900 to-green-950/30">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <div
          class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
        >
          <span
            class="text-amber-400 text-sm font-medium tracking-widest uppercase"
            >Our Promise</span
          >
        </div>
        <h2 class="font-serif italic text-4xl md:text-5xl text-white mb-8">
          People. Planet. Purpose.
        </h2>
        <p class="text-xl text-gray-300 font-light leading-relaxed mb-8">
          Every choice at Limban serves a deeper purpose. We've created a
          sanctuary where luxury means leaving the wild untouched, where comfort
          comes from connection, not consumption. Our commitment flows naturally
          - to the forest that shelters us, the community that sustains us, and
          the guests who trust us with their most meaningful journeys.
        </p>
      </div>
    </section>

    <!-- Feel the Vibe Gallery -->
    <section class="py-32 bg-gray-900">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >The Limban Experience</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Feel the Vibe of the Wild
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-4xl mx-auto">
            From dawn to dusk, each corner of Limban offers its own unique
            chapter in your safari story, designed to awaken your senses and
            connect you deeper with the wild.
          </p>
        </div>

        <GalleryGrid
          images={initialVibeImages}
          layout="grid"
          galleryType="vibe"
          gridId="vibe-gallery-grid"
          loadingStrategy="smart"
          priority={6}
        />

        <LoadMoreGallery
          buttonId="load-more-vibe"
          remainingImages={remainingVibeImages}
          initialImages={initialVibeImages}
          galleryType="vibe"
          galleryGridId="vibe-gallery-grid"
          layout="grid"
        />

        <div class="text-center mt-8">
          <p class="text-lg text-gray-300 font-light italic">
            Click any image to explore our signature spaces in detail
          </p>
        </div>
      </div>
    </section>

    <!-- Guest Gallery -->
    <section class="py-32 bg-gray-800">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Our Guests</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-5xl text-white mb-6">
            Moments Made at Limban
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Every smile tells a story, every moment captures the magic of
            connecting with the wild
          </p>
        </div>

        <GalleryGrid
          images={initialGuestImages}
          layout="grid"
          galleryType="guest"
          gridId="guest-gallery-grid"
          loadingStrategy="smart"
          priority={4}
        />

        <LoadMoreGallery
          buttonId="load-more-guests"
          remainingImages={remainingGuestImages}
          initialImages={initialGuestImages}
          galleryType="guest"
          galleryGridId="guest-gallery-grid"
          layout="grid"
        />

        <div class="text-center mt-6">
          <p class="text-gray-400 font-light italic">
            Click any photo to explore our guest moments in detail
          </p>
        </div>
      </div>
    </section>

    <!-- Location Section -->
    <section class="py-32 bg-gray-950">
      <div class="max-w-7xl mx-auto px-6">
        <div class="text-center mb-20">
          <div
            class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8"
          >
            <span
              class="text-amber-400 text-sm font-medium tracking-widest uppercase"
              >Find Your Way</span
            >
          </div>
          <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
            Journey to the Wild
          </h2>
          <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
            Nestled in the heart of Tadoba National Park, your journey to Limban
            is part of the experience itself.
          </p>
        </div>

        <!-- Travel Options -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Air</h3>
              <p class="text-gray-300 leading-relaxed">
                Dr. Babasaheb Ambedkar International Airport, Nagpur (125 km).
                Well-connected with direct flights from Mumbai, Delhi,
                Bengaluru, and Hyderabad.
              </p>
            </div>
          </div>

          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Road</h3>
              <p class="text-gray-300 leading-relaxed">
                A delightful drive through picturesque landscapes and rural
                Maharashtra, making the journey as memorable as the destination
                itself.
              </p>
            </div>
          </div>

          <div class="group text-center">
            <div
              class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl p-8 hover:border-amber-400/30 hover:-translate-y-2 transition-all duration-500"
            >
              <h3 class="text-xl font-semibold text-white mb-4">By Train</h3>
              <p class="text-gray-300 leading-relaxed">
                Chandrapur Railway Station (41 km) with connections to major
                cities. Comfortable transfers arranged by our team for seamless
                arrival.
              </p>
            </div>
          </div>
        </div>

        <!-- Address & Map -->
        <div
          class="bg-gradient-to-br from-gray-800/30 to-gray-900/50 backdrop-blur-xl border border-gray-700 rounded-3xl overflow-hidden"
        >
          <div class="p-8 text-center">
            <h3 class="font-serif italic text-4xl text-white mb-4">
              Our Address
            </h3>
            <div class="space-y-2 text-gray-300">
              <p class="text-lg">
                Survey No. 306, Village Mudholi, Taluka Bhadravati
              </p>
              <p>Chandrapur, Maharashtra 442906</p>
              <p class="text-amber-400 font-mono text-sm">
                20.25602486093492, 79.2847888101826
              </p>
            </div>
          </div>

          <div class="relative h-96 bg-gray-800">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3065.6143576966315!2d79.28224607418248!3d20.255878913877122!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bd331638d23f16f%3A0xd1c44c43e72c13f7!2sLimban%20Resort!5e1!3m2!1sen!2sin!4v1746016058517!5m2!1sen!2sin"
              width="100%"
              height="100%"
              style="border:0; filter: grayscale(20%) sepia(10%) hue-rotate(200deg) saturate(0.8);"
              allowfullscreen=""
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              class="w-full h-full"></iframe>
          </div>
        </div>
      </div>
    </section>

    <!-- Team Section -->
    {
      teamImages && teamImages.length > 0 && (
        <section class="py-32 bg-gray-900">
          <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
              <div class="inline-block px-6 py-2 bg-amber-400/10 border border-amber-400/30 rounded-full mb-8">
                <span class="text-amber-400 text-sm font-medium tracking-widest uppercase">
                  Our People
                </span>
              </div>
              <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
                The Heart of Limban
              </h2>
              <p class="text-xl text-gray-300 font-light max-w-3xl mx-auto">
                Meet our passionate team which brings Limban to life, each
                dedicated to creating unforgettable experiences that connect you
                with the wild.
              </p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
              {teamImages.map((teamMember, index) => (
                <div
                  key={index}
                  class="aspect-square bg-gray-800 rounded-2xl overflow-hidden hover:scale-105 transition-transform duration-500"
                >
                  <img
                    src={teamMember.optimisedSquare || teamMember.url || ""}
                    alt={
                      teamMember.alt || `Limban Resort team member ${index + 1}`
                    }
                    class="w-full h-full object-cover"
                    loading="lazy"
                  />
                </div>
              ))}
            </div>
          </div>
        </section>
      )
    }

    <!-- Call to Action -->
    <section class="py-32 bg-gray-950">
      <div class="max-w-4xl mx-auto px-6 text-center">
        <h2 class="font-serif italic text-4xl md:text-6xl text-white mb-8">
          Ready for Your Wild Awakening?
        </h2>
        <p
          class="text-xl text-gray-300 font-light leading-relaxed mb-12 max-w-3xl mx-auto"
        >
          Your journey into the heart of Tadoba awaits. Experience luxury that
          respects the wild, hospitality that touches the soul, and moments that
          become memories forever.
        </p>
        <div class="flex flex-col sm:flex-row gap-6 justify-center">
          <a
            href="/rooms"
            class="inline-flex items-center px-8 py-4 bg-amber-400 text-gray-900 font-medium rounded-full hover:bg-amber-300 hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl"
          >
            Explore Our Rooms
            <svg
              class="w-5 h-5 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
          <a
            href="/contact"
            class="inline-flex items-center px-8 py-4 border-2 border-gray-600 text-gray-300 font-medium rounded-full hover:border-amber-400 hover:text-amber-400 hover:scale-105 transition-all duration-300"
          >
            Plan Your Stay
            <svg
              class="w-5 h-5 ml-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
              ></path>
            </svg>
          </a>
        </div>
      </div>
    </section>
  </div>
</Layout>

<style>
  .optimised-image {
    transition:
      filter 0.5s ease,
      opacity 0.5s ease;
    will-change: filter, opacity;
  }

  .optimised-image.opacity-100 {
    opacity: 1 !important;
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: #1f2937;
  }

  ::-webkit-scrollbar-thumb {
    background: #f59e0b;
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #d97706;
  }

  @media (prefers-reduced-motion: reduce) {
    .transition-transform,
    .transition-all,
    .hover\:scale-105,
    .optimised-image {
      transition: none !important;
      transform: none !important;
    }
  }
</style>
