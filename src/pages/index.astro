---
export const prerender = true;
import Layout from "../layouts/Layout.astro";
import { AstroSEO } from "astro-seo-plugin";
import HeroSection from "../components/hero.astro";
import SubHeroSection from "../components/SubHeroSection.astro";
import RoomsSection from "../components/RoomsSection.astro";
import ExperiencesSection from "../components/ExperiencesSection.astro";
import TestimonialsSection from "../components/TestimonialsSection.astro";
import AwardsSection from "../components/AwardsSection.astro";
import ContactSection from "../components/ContactSection.astro";
import { fetchHomepageData } from "../api.js";

// Fetch data using clean API function
const data = await fetchHomepageData();

const heroes =
  data.heroes?.map((hero) => ({
    ...hero,
    heroImage: {
      url: hero.backgroundImage?.url,
      alt:
        hero.backgroundImage?.alt ||
        `${hero.slideTitle} - Limban Resort luxury safari experience`,
    },
  })) || [];

const rooms =
  data.rooms?.map((room) => ({
    ...room,
    roomImage: {
      url: room.heroImage?.url,
      alt: room.heroImage?.alt || room.roomName,
      altText: room.heroImage?.alt || room.roomName,
    },
    heroImage: {
      url: room.heroImage?.url,
      alt: room.heroImage?.alt || room.roomName,
    },
  })) || [];

// Safe hero image for SEO
const heroImage =
  heroes[0]?.heroImage?.url ||
  "https://ap-south-1.graphassets.com/cmek3o6f00dcb07o59sno2s0e/cmeo6x0vx3nwg07oahjln7gyv";

// Helper for Cloudinary JPG conversion
const toCloudinaryJpg = (url: string) =>
  `https://res.cloudinary.com/dfa5hhzej/image/fetch/w_1200,h_675,c_fill,q_85,f_jpg/${url}`;

// Amenities for schema
const amenities = [
  "Free WiFi",
  "Swimming Pool",
  "Restaurant",
  "Bar",
  "Spa & Wellness Center",
  "Free Parking",
  "Air Conditioning",
  "Laundry Service",
];

const hotelSchema = {
  "@context": "https://schema.org",
  "@type": "Hotel",
  "@id": "https://limban.com/#hotel",
  name: "Limban Resort",
  alternateName: "Limban Eco Luxury Safari Resort",
  description:
    "Award-winning eco-luxury resort 15 minutes from Tadoba Tiger Reserve. 16 exclusive rooms, swimming pool, spa, restaurant, and curated safari experiences in Maharashtra, India.",
  url: "https://limban.com",
  image: [
    toCloudinaryJpg(
      "https://ap-south-1.graphassets.com/cmek3o6f00dcb07o59sno2s0e/cmeo6x0vx3nwg07oahjln7gyv",
    ),
    toCloudinaryJpg(
      "https://ap-south-1.graphassets.com/cmek3o6f00dcb07o59sno2s0e/cmeo4x0jx3mka07oawsqerdmj",
    ),
    toCloudinaryJpg(
      "https://ap-south-1.graphassets.com/cmek3o6f00dcb07o59sno2s0e/cmeo5ppe83nd907plm6svhisc",
    ),
  ],
  logo: {
    "@type": "ImageObject",
    url: "https://limban.com/limban-resort-tadoba-logo.png",
    width: 300,
    height: 100,
  },
  address: {
    "@type": "PostalAddress",
    streetAddress: "Survey No. 306, Village Mudholi, Taluka Bhadravati",
    addressLocality: "Tadoba",
    addressRegion: "Maharashtra",
    postalCode: "442906",
    addressCountry: "IN",
  },
  geo: {
    "@type": "GeoCoordinates",
    latitude: 20.25602486093492,
    longitude: 79.2847888101826,
  },
  telephone: "+91-90226-80451",
  email: "info@limban.com",
  priceRange: "₹₹₹₹",
  currenciesAccepted: "INR",
  paymentAccepted: ["Cash", "Credit Card", "UPI", "Bank Transfer"],
  checkinTime: "13:00",
  checkoutTime: "11:00",
  numberOfRooms: 16,
  petsAllowed: true,
  smokingAllowed: false,
  starRating: {
    "@type": "Rating",
    ratingValue: "5",
  },
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: "4.8",
    reviewCount: 327,
    bestRating: "5",
    worstRating: "1",
  },
  amenityFeature: amenities.map((name) => ({
    "@type": "LocationFeatureSpecification",
    name: name,
    value: true,
  })),
  openingHoursSpecification: {
    "@type": "OpeningHoursSpecification",
    dayOfWeek: [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday",
    ],
    opens: "00:00",
    closes: "23:59",
  },
  hasMap:
    "https://www.google.com/maps/place/20.25602486093492,79.2847888101826",
  isAccessibleForFree: false,
  publicAccess: true,
  tourBookingPage: "https://limban.com/contact",
  knowsAbout: [
    "Tiger Conservation",
    "Sustainable Tourism",
    "Wildlife Photography",
    "Eco-Luxury Hospitality",
    "Tadoba Ecosystem",
  ],
  award: [
    "TripAdvisor Travelers' Choice 2023",
    "Condé Nast Traveller Featured Property",
    "Outlook Traveller Hidden Gem 2022",
  ],
  sameAs: [
    "https://www.tripadvisor.in/Hotel_Review-g10594630-d12902646-Reviews-Limban_Resort-Chandrapur_District_Maharashtra.html",
    "https://www.instagram.com/limbanresorts/",
    "https://www.facebook.com/limbanresortstadoba/",
  ],
};

const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "https://limban.com/#organization",
  name: "Limban Resort",
  url: "https://limban.com",
  logo: "https://limban.com/limban-resort-tadoba-logo.png",
  foundingDate: "2010",
  description: "Award-winning eco-luxury safari resort in Tadoba National Park",
  address: {
    "@type": "PostalAddress",
    streetAddress: "Survey No. 306, Village Mudholi, Taluka Bhadravati",
    addressLocality: "Tadoba",
    addressRegion: "Maharashtra",
    postalCode: "442906",
    addressCountry: "IN",
  },
  contactPoint: {
    "@type": "ContactPoint",
    telephone: "+91-90226-80451",
    contactType: "reservations",
    email: "info@limban.com",
    availableLanguage: ["English", "Hindi", "Marathi"],
  },
  sameAs: [
    "https://www.instagram.com/limbanresorts/",
    "https://www.facebook.com/limbanresortstadoba/",
  ],
};

// Combine schemas for AstroSEO
const combinedJsonLd = [hotelSchema, organizationSchema];
---

<Layout>
  <AstroSEO
    slot="head"
    title="Limban Resort Tadoba | Eco-Luxury Safari Resort Near Tiger Reserve"
    description="Award-winning boutique resort 15 minutes from Tadoba Tiger Reserve. 16 exclusive rooms, pool, spa, restaurant. Sustainable luxury, conservation-focused. Reservation only."
    openGraph={{
      title: "Limban Resort | Exclusive Safari Resort Tadoba National Park",
      description:
        "Boutique eco-luxury resort near Tadoba Tiger Reserve. Swimming pool, spa, restaurant. Reservation-only property focused on sustainable tourism and authentic wildlife experiences.",
      image: toCloudinaryJpg(heroImage),
      type: "website",
      url: "https://limban.com",
      site_name: "Limban Resort",
    }}
    jsonLd={combinedJsonLd}
  />

  <HeroSection heroes={heroes} />
  <SubHeroSection subHero={data.subHero} />
  <RoomsSection rooms={rooms} specialDeal={data.specialDeal} />
  {data.services && <ExperiencesSection experiences={data.services} />}
  <TestimonialsSection />
  <AwardsSection />
  <ContactSection />
</Layout>
